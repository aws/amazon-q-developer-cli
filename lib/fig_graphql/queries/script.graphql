query Script($namespace: String!, $name: String!) {
  namespace(username: $namespace) {
    script(name: $name) {
      ...ScriptFields
    }
  }
}

query Scripts {
  currentUser {
    namespace {
      ...NamespaceFields
    }
    teamMemberships {
      team {
        namespace {
          ...NamespaceFields
        }
      }
    }
  }
}

fragment NamespaceFields on Namespace {
  username
  scripts {
    ...ScriptFields
  }
}

fragment ScriptFields on Script {
  name
  updatedAt
  fields {
    displayName
    description
    templateVersion
    tags
    ruleset {
      or {
        specifier
        key
        value
        inverted
        predicate
      }
    }
    parameters {
      type
      name
      displayName
      description
      required
      text {
        placeholder
      }
      checkbox {
        trueValueSubstitution
        falseValueSubstitution
      }
      selector {
        generators {
          named {
            name
          }
          shellScript {
            script
          }
          type
        }
        placeholder
        suggestions
        allowRawTextInput
      }
      path {
        extensions
        fileType
      }
      commandlineInterface {
        required
        short
        long
        requireEquals
        raw
        type {
          __typename
          ... on ScriptParameterCommandlineInterfaceBoolean {
            type
            booleanDefault: default
          }
          ... on ScriptParameterCommandlineInterfaceString {
            type
            stringDefault: default
          }
        }
      }
    }
    runtime
    invocationCollection {
      disabled
      inputs
      stdout
      stderr
    }
  }
  astTree {
    type
    ... on ScriptAstParameter {
      name
    }
    ... on ScriptAstText {
      text
    }
    __typename
  }
  relevanceScore
  lastInvokedAt
  lastInvokedAtByUser
  isOwnedByCurrentUser
}
