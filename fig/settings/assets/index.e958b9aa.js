var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,l=(e,l)=>{for(var s in l||(l={}))n.call(l,s)&&r(e,s,l[s]);if(t)for(var s of t(l))a.call(l,s)&&r(e,s,l[s]);return e};import{r as s,R as c,u as i,a as o}from"./vendor.7cfa1067.js";function m(e){return void 0===window.fig||void 0===window.fig.settings?null:window.fig.settings[e]}function u(e,t){const n=JSON.stringify(t);window.fig.private({type:"settings",data:{key:e,value:n}}),window.fig._settings[e]=t,window.fig.settings[e]=t}function d({title:e,description:t,settingName:n,details:a}){const r=`${n}-wrapper`,[l,i]=s.exports.useState((()=>Boolean(m(n))));return c.createElement("div",{id:r,className:"settingsItem checkbox",tabIndex:0,onKeyDown:e=>{var t;"Enter"===e.key&&(null==(t=document.activeElement)?void 0:t.id)===r&&(e.preventDefault(),i(!l))}},c.createElement("span",{className:"checkbox__title"},e),c.createElement("div",{className:"checkbox__controls"},c.createElement("label",{htmlFor:n,className:"checkbox__description"},c.createElement("input",{id:n,type:"checkbox",checked:l,onChange:e=>{i(e.target.checked),u(n,e.target.checked)}}),t)),a&&c.createElement("p",{className:"control__details"},a))}const p=()=>{var e;return null!=(e=m("autocomplete.theme"))?e:"dark"},g=s.exports.createContext({theme:p(),setTheme:()=>{}}),E=()=>s.exports.useContext(g),h=({children:e})=>{const[t,n]=s.exports.useState(p());return s.exports.useEffect((()=>{n(p())}),[]),c.createElement(g.Provider,{value:{theme:t,setTheme:n}},e)};const v=e=>"string"==typeof e?e:e.name;function f({title:e,description:t,settingName:n,options:a,default:r,details:l}){const{setTheme:i}=E(),[o,d]=s.exports.useState((()=>{const e=m(n);return e||(r||"Please select a value")}));return c.createElement("div",{className:"settingsItem singleSelect"},c.createElement("span",{className:"singleSelect__title"},e),c.createElement("p",{className:"singleSelect__description"},t),c.createElement("div",{className:"singleSelect__controls"},c.createElement("select",{value:o,onChange:e=>{"autocomplete.theme"===n&&i(e.target.value),d(e.target.value),u(n,e.target.value)},tabIndex:0},c.createElement("option",{value:"Please select a value",disabled:!0},"Please select a value"),a.map((e=>c.createElement("option",{key:v(e)},v(e))))),c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c.createElement("polyline",{points:"6 9 12 15 18 9"}))),l&&c.createElement("p",{className:"control__details"},l))}function w({title:e,description:t,settingName:n,type:a,details:r}){const l="number"===a,[o,d]=s.exports.useState((()=>{var e;return null!=(e=m(n))?e:""})),p=i((e=>{u(n,e)}),1e3);return c.createElement("div",{className:"settingsItem text"},c.createElement("span",{className:"text__title"},e),c.createElement("p",{className:"text__description"},t),c.createElement("div",{className:"text__controls"},c.createElement("input",{tabIndex:0,type:l?"number":"text",value:o,onChange:e=>{let t=e.target.value;l&&(t=parseInt(null!=t?t:"",10),isNaN(t)||(t=Math.abs(t))),d(String(t)),p(t)},placeholder:e,spellCheck:!1})),r&&c.createElement("p",{className:"control__details"},r))}function _({title:e,description:t,settingName:n,details:a}){const[r,l]=s.exports.useState((()=>{const e=m(n);return e&&Array.isArray(e)?e.join(", "):""})),o=i((e=>{u(n,e.split(",").map((e=>e.trim())).filter(Boolean))}),1e3);return c.createElement("div",{className:"settingsItem multiSelect"},c.createElement("span",{className:"multiSelect__title"},e),c.createElement("p",{className:"multiSelect__description"},t),c.createElement("div",{className:"multiSelect__controls"},c.createElement("input",{tabIndex:0,type:"text",value:r,onChange:e=>{const t=e.target.value;l(t),o(t)},placeholder:e,spellCheck:!1})),a&&c.createElement("p",{className:"control__details"},a))}function N({searchTerm:e,onSearch:t}){return c.createElement("div",{className:"searchBar"},c.createElement("div",null,c.createElement("input",{className:"searchBar__input",type:"text",value:e,onChange:e=>t(e.target.value.trim()),placeholder:"Enter a keyword",spellCheck:!1}),c.createElement("svg",{className:"searchBar__icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c.createElement("circle",{cx:"11",cy:"11",r:"8"}),c.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}))))}function x({settings:e}){const[t,n]=s.exports.useState(""),a=function({searchTerm:e,settings:t}){return s.exports.useMemo((()=>{const n=null==e?void 0:e.toLowerCase();return function(e){const t=[];return e.forEach((e=>{const n=e.settingName.split(".")[0],a=t.findIndex((e=>e.some((e=>e.settingName.startsWith(n)))));-1!==a?t[a].push(e):t.push([e])})),t}((null!=t?t:[]).filter((e=>""===n||e.settingName.toLowerCase().includes(n)||e.title.toLowerCase().includes(n)||e.description.toLowerCase().includes(n)||e.options.some((e=>"string"==typeof e?e.toLowerCase().includes(n):e.name.toLowerCase().includes(n))))))}),[t,e])}({settings:e,searchTerm:t});return c.createElement("div",null,c.createElement(N,{searchTerm:t,onSearch:n}),null==a?void 0:a.map((e=>c.createElement("section",{className:"category",key:e[0].settingName},c.createElement("h1",{className:"category__title"},function(e){const t=e.split(".")[0];switch(t){case"pty":return"Pseudoterminal";case"app":return"Application";default:return t}}(e[0].settingName)),e.map((e=>c.createElement("div",{key:e.settingName,className:"category__entry"},function(e){switch(e.type){case"boolean":return c.createElement(d,l({},e));case"single_select":return c.createElement(f,l({},e));case"multiselect":return c.createElement(_,l({},e));case"number":case"text":return c.createElement(w,l({},e));default:return null}}(e))))))))}const y=({href:e,children:t})=>c.createElement("button",{className:"link",role:"link",onClick:()=>{window.fig.open(e)}},t);function b(){return c.createElement("section",{className:"about"},c.createElement("img",{src:"./logo-big.png",width:"100px",height:"100px",className:"about__logo"}),c.createElement("section",{className:"about__description"},c.createElement("h2",null,"Fig"),c.createElement("div",{className:"about__info"},c.createElement("p",null,"Version ",window.fig.appversion),c.createElement("p",null,"Copyright Â© 2021 Hercules Labs Inc.")),c.createElement("div",{className:"about__grid"},c.createElement("dt",null,"Website"),c.createElement("dd",null,c.createElement(y,{href:"https://fig.io"},"fig.io")),c.createElement("dt",null,"Support"),c.createElement("dd",null,c.createElement(y,{href:"https://fig.io/support"},"fig.io/support")),c.createElement("dt",null,"Github"),c.createElement("dd",null,c.createElement(y,{href:"https://github.com/withfig/autocomplete"},"github.com/withfig/autocomplete")),c.createElement("dt",null,"Email"),c.createElement("dd",null,c.createElement(y,{href:"mailto:hello@fig.io"},"hello@fig.io"))),c.createElement("section",{className:"about__dangerZone"},c.createElement("h3",null,"Danger Zone"),c.createElement("div",{role:"button",onClick:()=>{window.fig.private({type:"uninstall",data:{}})}},"Uninstall"))))}function k({currentPage:e,setCurrentPage:t}){const{theme:n}=E();return c.createElement("nav",{className:"settingsNav"},C.map((a=>c.createElement("div",{role:"button",key:a,onClick:()=>t(a),className:"settingsNav__button "+(e===a?"active":"")},function(e,t){switch(e){case"General":return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c.createElement("circle",{cx:"12",cy:"12",r:"3"}),c.createElement("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}));case"About":return c.createElement("img",{src:"light"===t?"./fig.png":"./fig-light.png",height:16,width:16})}}(a,n),c.createElement("span",{className:"settingsNav__title"},a)))))}const C=["General","About"];function S(){const[e,t]=s.exports.useState(),[n,a]=s.exports.useState("General"),{theme:r}=E();s.exports.useEffect((()=>{const e=e=>{if(e.metaKey){const t=parseInt(e.key,10)-1;void 0!==C[t]&&(e.preventDefault(),a(C[t]))}};return window.addEventListener("keypress",e),()=>{window.removeEventListener("keypress",e)}}),[]),s.exports.useEffect((()=>{const e=async()=>{if(!0===window.__isFigInited__){const e=await new Promise((e=>{window.fig.fread("~/.fig/tools/all-settings.json",(t=>{const n=JSON.parse(t);e(n)}))}));t(e)}};return e(),window.addEventListener("FIG_INIT_INTERNAL",e),()=>{window.removeEventListener("FIG_INIT_INTERNAL",e)}}),[]);const l=s.exports.useMemo((()=>{switch(n){case"General":return c.createElement(x,{settings:e});case"About":return c.createElement(b,null)}}),[n,e]);return c.createElement("div",{className:"app","data-theme":r},c.createElement(k,{currentPage:n,setCurrentPage:a}),c.createElement("div",{className:"content"},l))}o.render(c.createElement(c.StrictMode,null,c.createElement(h,null,c.createElement(S,null))),document.getElementById("root"));
